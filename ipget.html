<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html;">
<title>JavaScript获取客户端IP[利用新浪接口]</title>
	

</head>
<body>

	
	<div id="ipInfoFromSoho">
	</div>
	<div id="ipInfoFromFreegeoip">
	</div>
</body>
		<script type="text/javascript" src="js/jquery.1.11.1.js"></script>
<script type="text/javascript" src="http://pv.sohu.com/cityjson?ie=utf-8"></script>  
<script type="text/javascript">
	
	var retSohu = "<br />----------------pv.sohu.com/cityjson------------------<br />";
	retSohu += "地区IP："+returnCitySN.cip+"<br />";
	retSohu += "地区编码："+returnCitySN.cid+"<br />"
	retSohu += "地区名称："+returnCitySN.cname+"<br />"
	document.getElementById("ipInfoFromSoho").innerHTML = retSohu;
	
	$.ajax({
    url: 'https://freegeoip.net/json/',
    success: function(data){
		var retFree = "<br />----------------freegeoip.net------------------<br />";
		retFree += JSON.stringify(data)+"<br />"
		document.getElementById("ipInfoFromFreegeoip").innerHTML = retFree;
    },
	error: function(data){
		var retFree = "<br />----------------freegeoip.net------------------<br />";
		retFree += "error from freegeoiip："+JSON.stringify(data)+"<br />"
		document.getElementById("ipInfoFromFreegeoip").innerHTML = retFree;
	},
    type: 'GET',
    dataType: 'JSON'
});
</script>
</html>